# ============================================================================
# File: group_vars/all.yml
# Global variables for all machine types
# ============================================================================

# Repository root path (computed from playbook directory)
# This allows consistent task references regardless of where playbook is called from
repo_root: "{{ playbook_dir | dirname if 'playbooks' in playbook_dir else playbook_dir }}"

# Network volume base path (used by all machine types)
macos_network_base: "/Volumes/backup_proxmox/macos"

required_network_volumes:
  - backup_proxmox

# Backup configuration
backup_create_timestamped: false  # Set to true for versioned backups

# ============================================================================
# SSH Configuration (Common to all machines)
# ============================================================================
# All machines get public keys from studio backup for SSH access
# Studio machine overrides this in group_vars to include private keys
ssh_source_base: "{{ macos_network_base }}/ssh/studio"

ssh_files:
  - { src: "id_ed25519.pub", dest: "id_ed25519.pub", mode: '0644' }
  - { src: "id_rsa.pub", dest: "id_rsa.pub", mode: '0644' }
  - { src: "authorized_keys", dest: "authorized_keys", mode: '0600' }

# ============================================================================
# Dotfiles Configuration
# ============================================================================
dotfiles_files: []