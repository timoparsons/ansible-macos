---
# tasks/install_dmg.yml
# Shared task to handle DMG files containing either .app or .pkg installers
# Pass in the variable 'dmg_pkg_apps' when including this task

- name: Install apps from DMG files
  include_tasks: install_single_dmg.yml
  loop: "{{ dmg_pkg_apps }}"
  when: 
    - dmg_pkg_apps is defined 
    - dmg_pkg_apps | length > 0
  loop_control:
    loop_var: dmg_item
    label: "{{ dmg_item.name }}"